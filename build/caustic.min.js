-function(){var a=[].slice;b=function b(){this.callbacks={}},b.prototype.on=function(a,b){(this.callbacks[a]=this.callbacks[a]||[]).push(b);return this},b.prototype.emit=function(b){var c=a.call(arguments,1),d=this.callbacks[b];if(d)for(var e=0,f=d.length;e<f;++e)d[e].apply(this,c);return this}}(),-function(){function a(a){return"string"==typeof a?function(b){return b[a]()}:a}b=function b(a){if(!(this instanceof b))return new b(a);EventEmitter.call(this);var c;~a.indexOf("<")?c=a:c=$("#"+a+"-template").html(),this.el=$(c),this.visit(this.el)},b.prototype.__proto__=EventEmitter.prototype,b.prototype.visit=function(a,b){var c=this,d=a.get(0).nodeName,e=a.attr("class").split(/ +/),f="visit"+d;this[f]&&!b&&this[f](a,e[0]),a.children().each(function(a,b){c.visit($(b))})},b.prototype.visitTABLE=function(a,b){this[b]=a,this[b].add=function(a){this.append(a.el||a)}},b.prototype.visitINPUT=function(a){var b=this,c=a.attr("name"),d=a.attr("type");switch(d){case"text":this[c]=function(b){if(0==arguments.length)return a.val();a.val(b);return this},this[c].isEmpty=function(){return""==a.val()},this[c].clear=function(){a.val("");return b};break;case"checkbox":this[c]=function(c){if(0==arguments.length)return a.attr("checked");switch(typeof c){case"function":a.change(function(d){c.call(b,a.attr("checked"),d)});break;default:a.attr("checked",c?"checked":c)}return this}}},b.prototype.visitCANVAS=function(a,b){this[b]=a.get(0)},b.prototype.visitFORM=function(a,b){var c=this;this.submit=function(b){switch(typeof b){case"function":a.submit(function(d){b.call(c,d,a);return!1})}}},b.prototype.visitA=function(a,b){var c=this;a.click(function(d){c.emit(b,d,a)}),this[b]=function(b){a.click(function(d){b.call(c,d,a);return!1});return this}},b.prototype.visitP=b.prototype.visitTD=b.prototype.visitSPAN=b.prototype.visitDIV=function(a,b){var c=this;this[b]=function(b){if(0==arguments.length)return a;a.empty().append(b.el||b);return this}},b.prototype.visitUL=function(b,c){var d=this;this.children=[],this[c]=b,b.add=function(a){var c=$("<li>");d.children.push(a),b.append(c.append(a.el||a));return this},b.items=function(){return d.children},b.each=function(a){for(var b=0,c=d.children.length;b<c;++b)a(d.children[b],b);return this},b.map=function(b){var c=[],b=a(b);for(var e=0,f=d.children.length;e<f;++e)c.push(b(d.children[e],e));return c}},b.prototype.visitH1=b.prototype.visitH2=b.prototype.visitH3=b.prototype.visitH4=b.prototype.visitH5=function(a,b){var c=this;this[b]=function(b){if(0==arguments.length)return a.text();a.text(b.el||b);return this}},b.prototype.remove=function(){var a=this.el.parent(),b=a.get(0).nodeName;"LI"==b?a.remove():this.el.remove();return this},b.prototype.appendTo=function(a){this.el.appendTo(a.el||a);return this}}()